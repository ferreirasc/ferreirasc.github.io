<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta property="og:description" content="">
  
  <meta property="og:image" content="https://ferreirasc.github.io/post/boca_tutorial/">
  <meta property="og:image:type" content="image/jpg">
  
  <meta property="og:type" content="article">
  <meta property="article:author" content="Leonardo Ferreira">
  
  <meta property="article:published_time" content="2014-06-24 10:33:23 -0400 -0400">
  <meta property="fb:app_id" content="128539894229266"/>
  <meta property="fb:admins" content="1234176778"/>
  <meta name="generator" content="Hugo 0.53" />

  <title>Instalando o sistema BOCA Online Contest &middot; Leonardo Ferreira</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://ferreirasc.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://ferreirasc.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://ferreirasc.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  
  <link rel="shortcut icon" href="https://ferreirasc.github.io/img/favicon.ico" type="image/x-icon" />
  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>
  
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { 
          equationNumbers: { autoNumber: "AMS" },
          extensions: ["AMSmath.js", "AMSsymbols.js"] 
      }
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" } 
    }
});
  MathJax.Hub.Queue(function() {
  
  
  
  var all = MathJax.Hub.getAllJax(), i;
  for(i = 0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script>

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://ferreirasc.github.io/"> ferreirasc:~#</a>



<a class="pure-menu-heading brand" href="https://ferreirasc.github.io/about"><img class="avatar" src="https://ferreirasc.github.io/avatar.jpg"/></a>



  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://ferreirasc.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://ferreirasc.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://ferreirasc.github.io/about/"><i class='fa fa-user fa-fw'></i>About Me</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://ferreirasc.github.io/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ferreirasc0" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/ferreirasc" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/ferreirasc" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/ferreirasc" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Instalando o sistema BOCA Online Contest</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>24 Jun 2014, 10:33</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://ferreirasc.github.io/topics/guides">Guides</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://ferreirasc.github.io/tags/boca">BOCA</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://ferreirasc.github.io/tags/maratona">maratona</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://ferreirasc.github.io/tags/programacao">programacao</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://ferreirasc.github.io/tags/ufes">UFES</a>
    
  </div>
  
  
  
  
  
  <div>
    <i class="fa fa-signal fa-fw"></i>
      <a class="post-taxonomy-level" href="https://ferreirasc.github.io/level/basic">Basic</a>
  </div>
  
  

</div>


  <p>Neste tutorial estarei demonstrando, passo-a-passo, como instalar e configurar o sistema BOCA Online Contest Administrator, utilizado para criar e gerenciar ambientes para competições de programação.</p>

<p>Este post é direcionado a disciplina de &ldquo;Programação II&rdquo; do curso de Engenharia de Computação da UFES (2014-2), na qual atuo como monitor.</p>

<h3 id="procedimento"><strong>Procedimento</strong></h3>

<hr />

<p>Com privilégios de root sempre, faça:</p>

<p>1 - Acesse o site <a href="http://www.ime.usp.br/~cassio/boca/">http://www.ime.usp.br/~cassio/boca/</a> e extraia o script “installv2.sh”. Caso o script esteja no link “<a href="http://www.ime.usp.br/~cassio/boca/download.php?filename=installv2.sh&quot;:">http://www.ime.usp.br/~cassio/boca/download.php?filename=installv2.sh&quot;:</a></p>

<pre><code class="language-bash"># wget --output-document=installv2.sh http://www.ime.usp.br/~cassio/boca/download.php?filename=installv2.sh
</code></pre>

<p>2 - Atribua permissão de execução para “installv2.sh”:</p>

<pre><code class="language-bash"># chmod +x installv2.sh
</code></pre>

<p>3 - Execute o script:</p>

<pre><code class="language-bash"># sh installv2.sh
</code></pre>

<p>Durante a instalação, o script te perguntará se deseja tornar esse sistema um servidor, se deseja definir uma senha, se deseja que ele crie um banco de dados padrão do BOCA. Para todas essas perguntas, a resposta é “Y”. Redefina a nova senha como: “boca”.</p>

<p>Para qualquer outra senha pedida, defina como “boca”, para facilitar. (<strong><em>Recomenda-se que esta senha seja alterada para uma senha complexa posteriormente</em></strong>)</p>

<p>4 - Navegue até o diretório “/etc/apache2/conf.d/” e modifique o arquivo “boca”.</p>

<pre><code class="language-bash"># cd /etc/apache2/conf.d/
# vim boca
</code></pre>

<p>Modifique as linhas do arquivo para que fiquem como a seguir:</p>

<pre><code class="language-bash"> &lt;Directory /var/www/boca&gt;
	AllowOverride Options AuthConfig Limit
	Order Allow,Deny
	Allow from all
	AddDefaultCharset utf-8
&lt;/Directory&gt;
&lt;Directory /var/www/boca/private&gt;
	AllowOverride None
	Deny from all
&lt;/Directory&gt;
&lt;Directory /var/www/boca/doc&gt;
	AllowOverride None
	Deny from all
&lt;/Directory&gt;
&lt;Directory /var/www/boca/tools&gt;
	AllowOverride None
	Deny from all
&lt;/Directory&gt;
</code></pre>

<p>Caso existam mais linhas que estas no arquivo, pode deixar elas aí. Caso não existam algumas dessas linhas, adicione-as.</p>

<p>5 - Agora navegue até “cd /etc/postgresql/*/main” e abra o arquivo “postgresql.conf”.</p>

<pre><code class="language-bash"># cd /etc/postgresql/*/main
# vim postgresql.conf
</code></pre>

<p>No final do arquivo, copie e cole:</p>

<pre><code class="language-bash"># THE FOLLOWING MAY BE GOOD FOR PERFORMANCE
max_connections = 100
maintenance_work_mem = 32MB
shared_buffers = 512MB      ## USE AROUND 1/3 OF YOUR RAM
work_mem = 10MB
effective_cache_size = 512MB     ## USE AROUND 1/3 OF YOUR RAM
</code></pre>

<p>6 - Ainda no diretório “/etc/postgresql/*/main”, modifique agora o arquivo “pg_hba.conf”.</p>

<p>Onde contém:</p>

<pre><code class="language-bash">#Put your actual configuration here
#——————————————–
</code></pre>

<p>Deixe:</p>

<pre><code class="language-bash">#Put your actual configuration here
#——————————————–
host    all   all 127.0.0.1 255.255.255.255 md5
host    all   all 0.0.0.0     0.0.0.0       md5
</code></pre>

<p>7 - Digite “cat /etc/sysctl.d/10-shmmax.conf” e verifique se os valores que aparecem são esses:</p>

<pre><code class="language-bash">kernel.shmmax = 805416960
kernel.shmall = 196635
</code></pre>

<p>8 - Agora precisamos definir a senha do nosso usuário postgres que irá acessar o banco de dados.</p>

<pre><code class="language-bash"># sudo passwd postgres
</code></pre>

<p>Defina “boca” como senha.</p>

<p>9 - Logue no sistema como “postgres”</p>

<pre><code class="language-bash"># su postgres
</code></pre>

<p>10 - Logado como “postgres”:</p>

<pre><code class="language-bash">postgres# psql
</code></pre>

<p>Isso fará com que você entre dentro da CLI do postgresql.</p>

<p>Agora:</p>

<pre><code class="language-bash">postgres# ALTER USER postgres WITH PASSWORD &quot;boca&quot; –d template1
postgres# ALTER USER postgres WITH PASSWORD &quot;boca&quot; –d bocadb
postgres# \quit
</code></pre>

<p>11 - Reinicie os serviços:</p>

<pre><code class="language-bash"># /etc/init.d/apache2 restart
# /etc/init.d/postgresql restart
</code></pre>

<p>A partir de agora, o BOCA deverá estar acessível no IP do servidor. Se instalei no servidor de IP “200.137.66.43”, digite: “<a href="http://200.137.66.43/boca&quot;">http://200.137.66.43/boca&quot;</a> no navegador e teste.</p>

<hr />

<p>12 - (<strong>APENAS</strong> se o banco de dados não foi criado no ato da instalação…)</p>

<p>Navegue até “/var/www/boca/src” e digite:</p>

<pre><code class="language-bash"># php private/createdb.php
</code></pre>

<p>Reinicie os serviços:</p>

<pre><code class="language-bash"># /etc/init.d/apache2 restart
# /etc/init.d/postgresql restart
</code></pre>

<hr />

<p>13 - Autojudge</p>

<p>Para ativar o autojudge, digite:</p>

<pre><code class="language-bash"># cd /var/www/boca/tools
# ./autojudge.sh
</code></pre>

<p>Caso algo como “Nothing to do. Sleeping…” apareça no fim da execução, tudo está executando bem.</p>

<hr><br>
  
  
  <small><i class="fa fa-lightbulb-o" aria-hidden="true"></i> Last modified: June 24, 2014</small>  
</hr>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://ferreirasc.github.io/post/introcomp_tutorial01/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://ferreirasc.github.io/post/introcomp_tutorial01/">Programando C em Windows e Linux (Introcomp)</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://ferreirasc.github.io/post/smash_the_stack1/">IO Smash The Stack - Level01</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://ferreirasc.github.io/post/smash_the_stack1/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


  

  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'ferreirasc';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="https://ferreirasc.github.io/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77924066-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

